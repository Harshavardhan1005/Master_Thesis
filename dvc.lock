schema: '2.0'
stages:
  load_and_clean_gps_data:
    cmd: python src/load_and_clean_gps_data.py --config=params.yaml
    deps:
    - path: gps_data/FMS_signals_raw.csv
      md5: 891e5120c689d280e00b0fe7fc9b4aee
      size: 47074
    - path: gps_data/raw_data
      md5: 881b0ecdd8237f605b27590075a5c43b.dir
      size: 546145932
      nfiles: 321
    - path: src/load_and_clean_gps_data.py
      md5: 414e246c1e9542d17e302672e3ce9837
      size: 3178
    outs:
    - path: gps_data/cleaned_data
      md5: bd8d0a8b430cb5e5fbceeaa5a0679f68.dir
      size: 962335207
      nfiles: 4
  preprocess_gps_data:
    cmd: python src/preprocess_gps_data.py --config=params.yaml
    deps:
    - path: gps_data/cleaned_data
      md5: bd8d0a8b430cb5e5fbceeaa5a0679f68.dir
      size: 962335207
      nfiles: 4
    - path: src/preprocess_gps_data.py
      md5: d23c505d1036740de9744e4013591b4d
      size: 10216
    outs:
    - path: gps_data/preprocessed_data
      md5: c86bdac54a827614a2980b4cd33a8664.dir
      size: 212760
      nfiles: 8
  merge_gps_data:
    cmd: python src/merge_gps_data.py --config=params.yaml
    deps:
    - path: gps_data/preprocessed_data/plant2-plant1
      md5: 77e25edd07aa13d5ad70af0051d98092.dir
      size: 106601
      nfiles: 4
    - path: src/preprocess_weather_data.py
      md5: a7e6dcacf0349b879e3aec37c383262e
      size: 4830
    outs:
    - path: gps_data/merge_data
      md5: 1f23e7bcfd2c923dd1d1aae8ac5e6447.dir
      size: 139755
      nfiles: 1
  preprocess_weather_data:
    cmd: python src/preprocess_weather_data.py --config=params.yaml
    deps:
    - path: src/preprocess_weather_data.py
      md5: a7e6dcacf0349b879e3aec37c383262e
      size: 4830
    - path: weather_data/raw_data
      md5: d7570902cf28f11b98a4235223c69109.dir
      size: 1519204
      nfiles: 3
    outs:
    - path: weather_data/cleaned_data
      md5: 86736d9b9ad5a3e5e0409255a942829b.dir
      size: 278856
      nfiles: 1
    - path: weather_data/preprocessed_data
      md5: d0cd60b954319e15e995749270c36156.dir
      size: 331655
      nfiles: 1
  merge_and_split_data:
    cmd: python src/merge_and_split.py --config=params.yaml
    deps:
    - path: gps_data/merge_data/gps_data.csv
      md5: d3017add53962890aa593675987a5cd0
      size: 139755
    - path: src/merge_and_split.py
      md5: e39348aa487d816c8a250b474a033c46
      size: 1949
    outs:
    - path: merged_data/test.csv
      md5: 0ba9192e99f5ad3762efffac5a061ac4
      size: 13212
    - path: merged_data/train.csv
      md5: 12ad7fad995e6bd9319314423354cfae
      size: 53108
  train_and_evaluate:
    cmd: python src/train_and_evaluate.py --config=params.yaml
    deps:
    - path: merged_data/test.csv
      md5: 90376c29fcda03b7be9870cc4d128781
      size: 19553
    - path: merged_data/train.csv
      md5: a59810e9ba403f4a6a9da77f6976cb2c
      size: 78196
    - path: src/train_and_evaluate.py
      md5: 471148b6b770f9ea5d5f62eab1a0a8ac
      size: 8147
    params:
      params.yaml:
        estimators.RandomForest.params.max_depth: 8
        estimators.RandomForest.params.min_samples_leaf: 2
        estimators.RandomForest.params.min_samples_split: 2
        estimators.RandomForest.params.n_estimators: 20
        estimators.XGBoost.params.gamma: 1
        estimators.XGBoost.params.learning_rate: 0.1
        estimators.XGBoost.params.max_depth: 13
        estimators.XGBoost.params.min_child_weight: 1
        estimators.XGBoost.params.n_estimators: 90
  log_final_model:
    cmd: python src/log_final_model.py --config=params.yaml
    deps:
    - path: src/log_final_model.py
      md5: 57131dab159b517cd1a3c35a3fe77dab
      size: 4097
    - path: src/train_and_evaluate.py
      md5: 471148b6b770f9ea5d5f62eab1a0a8ac
      size: 8147
    params:
      params.yaml:
        estimators.RandomForest.params.max_depth: 8
        estimators.RandomForest.params.min_samples_leaf: 2
        estimators.RandomForest.params.min_samples_split: 2
        estimators.RandomForest.params.n_estimators: 20
        estimators.XGBoost.params.gamma: 1
        estimators.XGBoost.params.learning_rate: 0.1
        estimators.XGBoost.params.max_depth: 13
        estimators.XGBoost.params.min_child_weight: 1
        estimators.XGBoost.params.n_estimators: 90
